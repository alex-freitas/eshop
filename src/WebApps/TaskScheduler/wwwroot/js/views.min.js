function ValidarCPF(n){var r,t;if(n=n.replace(/[.-]/g,""),r=0,n==="00000000000")return!1;for(i=1;i<=9;i++)r=r+parseInt(n.substring(i-1,i))*(11-i);if(t=r*10%11,(t==10||t==11)&&(t=0),t!=parseInt(n.substring(9,10)))return!1;for(r=0,i=1;i<=10;i++)r=r+parseInt(n.substring(i-1,i))*(12-i);return(t=r*10%11,(t==10||t==11)&&(t=0),t!=parseInt(n.substring(10,11)))?!1:!0}$.ajaxSetup({cache:!1});window.showProgressBar=function(){var n=$.data(window,"_progressCount"),t;n||(n=0);n==0&&(t=setTimeout(function(){var n=$.mensagem('<i style="color: white" class="fa fa-cog fa-spin fa-3x fa-fw margin-bottom"><\/i>',{milisegundos:6e5});$.data(window,"_progressBar",n)},1e3),$.data(window,"_progressBarTimeout",t));$.data(window,"_progressCount",n+1)};window.closeProgressBar=function(){var t=$.data(window,"_progressCount")-1,n=$.data(window,"_progressBar"),i=$.data(window,"_progressBarTimeout");t==0&&(n&&n.fadeOut(150,function(){n.remove()}),i&&clearTimeout(i),$.data(window,"_progressBar",null),$.data(window,"_progressBarTimeout",null));$.data(window,"_progressCount",t)};$(document).ajaxSend(showProgressBar);$(document).ajaxComplete(closeProgressBar);var originalAjax=$.ajax;$.ajax=function(n){if(n.error){var t=n.error;n.error=function(n,i,r){if(n.status!=403&&n.status!=401)return t(n,i,r)}}return originalAjax(n)};$(document).ajaxError(function(n,t){t.status===403?(alert("Sessão expirada. Redirecionando para a tela de login..."),window.location.href=t.getResponseHeader("Location")):t.status==401?$.mensagemErro("Permissões insuficientes para realizar esta operação"):$.mensagemErro("Ocorreu algum erro durante a execução do procedimento")});$.datepicker.setDefaults({dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],dayNamesMin:["Do","Se","Te","Qa","Qi","Se","Sa"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]});$.extend($.ui.dialog.prototype.options,{show:{effect:"fade",duration:100},hide:{effect:"fade",duration:100}});jQuery.extend(jQuery.validator.messages,{required:"Campo obrigatório",remote:"Please fix this field.",email:"Email inválido",url:"URL inválida",date:"Data inválida",dateISO:"Data inválida",number:"Use apenas números inteiros",decimal:"Número inválido",cpf:"Número de CPF inválido",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Informe o mesmo valor novamente",accept:"Please enter a value with a valid extension.",maxlength:jQuery.validator.format("O máximo de caracteres permitido é {0}"),minlength:jQuery.validator.format("O mínimo de caracteres permitido é {0}"),rangelength:jQuery.validator.format("Informe um valor entre {0} e {1}"),range:jQuery.validator.format("Informe um valor entre {0} e {1}"),max:jQuery.validator.format("Informe um valor menor ou igual à {0}"),min:jQuery.validator.format("Informe um valor maior ou igual à {0}")});jQuery.validator.setDefaults({onkeyup:!1,onfocusout:!1,ignore:[]});jQuery.validator.addMethod("date",function(n){return n?moment(n,"DD/MM/YYYY").isValid():!0});jQuery.validator.addMethod("datetime",function(n){return n?moment(n,"DD/MM/YYYY hh:mi").isValid():!0});jQuery.validator.addMethod("cpf",function(n){return n&&n!="___.___.___-__"?ValidarCPF(n):!0});jQuery.validator.addMethod("decimal",function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:\.\d{3})+)(?:,\d+)?$/.test(n)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(n)});jQuery.validator.addMethod("DateGt",function(n,t,i){return n&&i.val()&&moment(n,"DD/MM/YYYY").isValid()&&moment(i.val(),"DD/MM/YYYY").isValid()?moment(n,"DD/MM/YYYY").toDate()>moment(i.val(),"DD/MM/YYYY").toDate():!0});jQuery.validator.addMethod("DateGtEq",function(n,t,i){return n&&i.val()&&moment(n,"DD/MM/YYYY").isValid()&&moment(i.val(),"DD/MM/YYYY").isValid()?moment(n,"DD/MM/YYYY").toDate()>=moment(i.val(),"DD/MM/YYYY").toDate():!0});jQuery.validator.addClassRules({required:{required:!0},date:{date:!0},datetime:{datetime:!0},number:{number:!0,digits:!1},decimal:{decimal:!0},cpf:{cpf:!0}});jQuery.validator.prototype.showErrors=function(){$.each(this.elements(),function(n,t){$(t).removeClass("validationFail")});$.each(this.errorList,function(n,t){var r=$(t.element),i=$("<div>");r.parent().append(i);i.html(t.message);i.addClass("validationMessage");r.addClass("validationFail");i.css({width:"auto",position:"absolute","z-index":"9999999"});i.position({of:r,my:"left top",at:"left bottom"});i.hide();i.showFor({effect:"fade",callback:function(){i.remove()}})});this.errorList.length>0&&$.mensagemErro("Foram encontrados erros de validação")};window.fn=function(n,t,i,r,u,f){return function(){return n(t,i,r,u,f)}};$.fn.fadedload=function(n){var t=$(this);t.fadeOut(100,fn(t.load,n,fn(t.fadeIn,100)))};$.fn.ajaxLoad=function(n){var i=$(this),t=$.Deferred();return n.done(function(n){i.html(n);t.resolve(n)}),t};$.mensagem=function(n,t){var u=$("body"),i=$("<div>"),r={milisegundos:2e3,cssClass:"mensagem"};$.extend(r,t);u.append(i);i.hide();Array.isArray(n)?$.each(n,function(n,t){i.append(t+"<br/>")}):i.html(n);i.addClass(r.cssClass);i.css({position:"fixed",left:u.outerWidth()/2-i.outerWidth()/2,top:0,zIndex:999999999});i.showFor({effect:"fade",milliseconds:r.milisegundos,effectDuration:150,callback:function(){i.remove()}});i.on("remove",function(){$(window).off("scroll",followScroll)});return i};$.mensagemSalvo=fn($.mensagem,"Registro salvo com sucesso");$.mensagemConsultaAtualizada=fn($.mensagem,"Consulta atualizada");$.mensagemExcluido=fn($.mensagem,"Registro excluído com sucesso");$.mensagemErro=function(n){n||(n="Algum erro ocorreu durante o processo");$.mensagem(n,{cssClass:"mensagemErro"})};$.fn.showFor=function(n){var t={milliseconds:2e3,effect:"fade",effectDuration:200,callback:undefined};$.extend(t,n);var i=$(this),r=$.fn.fadeIn,u=$.fn.fadeOut;t.effect=="slide"&&(r=$.fn.slideDown,u=$.fn.slideUp);r.call(i,t.effectDuration,fn(setTimeout,function(){u.call(i,t.effectDuration,t.callback)},t.milliseconds))};$.display={mask:{cnpj:"99.999.999/9999-99",cpf:"999.999.999-99",cep:"99999-999",date:"99/99/9999"}};$.fn.setSpecialInputs=function(){$("input.price",this).priceFormat({prefix:"",centsSeparator:",",thousandsSeparator:"."});$("input.date",this).mask($.display.mask.date);$("input.date",this).datepicker();$("input.datetime",this).mask("99/99/9999 99:99");$("input.datetime",this).datetimepicker();$("input.cep",this).mask($.display.mask.cep);$("input.cpf",this).mask($.display.mask.cpf);$("input.cnpj",this).mask($.display.mask.cnpj)};$.myContext=function(n){return function(t){return $(t,n)}};$.fn.toJSON=function(){var t=$(this).find("input,textarea,select"),n={};return t.each(function(t,i){i.tagName=="TEXTAREA"?n[i.name]=$(i).val():$(i).attr("type")=="checkbox"?n[i.name]=$(i).prop("checked"):$(i).attr("type")=="radio"?$(i).prop("checked")&&(n[i.name]=i.value):n[i.name]=i.value}),n};$.confirmarExclusao=fn(confirm,"Deseja realmente excluir este registro?");$.dialog=function(n){var t={width:500,height:300,closeButton:!0,header:!0,fadeTime:200,popCover:!1},s,f,h;$.extend(t,n);var c=$.Deferred(),l=$("body"),u=$("<div>"),i=$("<div>"),o=$("<div>"),r=$("<div>"),e=$("<button>");return i.hide(),u.hide(),$(window).data("popup_zIndexCount")?$(window).data("popup_zIndexCount",$(window).data("popup_zIndexCount")+2):$(window).data("popup_zIndexCount",1100),s=$(window).data("popup_zIndexCount"),i.data("args",t),f=function(){var h,n,f;u.css({zIndex:s,margin:"0",padding:"0",border:"0",position:"fixed",left:"0",top:"0",backgroundColor:"#AAAAAA",opacity:"0.4"});h=function(){u.width($(document).width());u.height($(document).height())};l.append(u);$(window).resize(h);i.data("$background",u);i.data("$def",c);i.addClass("popup_class panel-primary");t.popCover||t.fullscreen?i.css({zIndex:s+1,position:"fixed",left:0,top:0,height:"100%",width:"100%"}):(i.width(t.width),i.height(t.height),n=$(window).outerWidth()/2-i.outerWidth()/2,f=$(window).outerHeight()/2-i.outerHeight()/2-50,n<0&&(n=0),f<10&&(f=10),i.css({zIndex:s+1,position:"fixed",left:n,top:f}));l.append(i);t.header&&(o.addClass("popup_header panel-heading"),o.html(t.title),i.append(o));i.append(r);r.css({padding:"5px",boxSizing:"border-box",width:"100%",maxHeight:i.innerHeight()-o.outerHeight()-12,overflowY:"auto"});r.addClass("popup_content");t.closeButton&&(e.addClass("cancel popup_closeButton btn btn-sm btn-danger"),e.html("x"),i.append(e),e.click(function(){e.closeDialog()}));i.fadeIn(t.fadeTime);u.fadeIn(t.fadeTime);h()},t.message?(r.html(t.message),f()):t.messageList?(h=new String,$.each(t.messageList,function(n,t){h+=t+"<br/>"}),r.html(h),f()):t.element?(r.append(t.element),f()):t.elements?($.each(t.elements,function(n,t){r.append(t)}),f()):r.ajaxLoad(t.action).done(f),c};$.fn.closeDialog=function(n){var t=$(this).parents(".popup_class:first"),i=t.data("$background"),u=t.data("$def"),r=t.data("args");t.fadeOut(r.fadeTime,function(){t.remove()});i.fadeOut(r.fadeTime,function(){i.remove()});u.resolve(n)};$.alerta=function(n){Array.isArray(n)?$.dialog({title:"Alerta",messageList:n}):$.dialog({title:"Alerta",message:n})};$.fn.paginator=function(n){var t=$(this),f,r;t.data(n);var e=t.data("maxRowsInput"),c=t.data("startRowInput"),o=function(){c.val((t.data("currentPage")-1)*e.val()+1)};if(!t.data("configured")){t.data("configured",!0);var s=$("<span>"),i=$("<button>"),u=$("<input>"),h=$("<span>");s.addClass("pagging_totalPages pagging_text");h.addClass("pagging_totalRows pagging_text");i.addClass("pagging_buttons btn btn-primary");f=i.clone();i.html("<").addClass("prevPage");f.html(">").addClass("nextPage");u.attr({type:"text"}).css({width:"40px"});u.addClass("pagging_currentPage");t.data("currentPage")||t.data("currentPage",1);t.append($("<span>",{text:"Pag.: ","class":"pagging_text"})).append(i).append("&nbsp;").append(u).append($("<span>",{text:" de ","class":"pagging_text"})).append(s).append(f).append(h);r=function(n){n>=1&&n<=t.data("totalPages")&&(t.data("currentPage",n),o(),t.data("pageChanged")());$("input",t).val(t.data("currentPage"))};$(".prevPage",t).click(function(){r(t.data("currentPage")-1)});$(".nextPage",t).click(function(){r(t.data("currentPage")+1)});$("input",t).change(function(){r(parseInt($(this).val()))})}t.data("totalPages",Math.ceil(t.data("totalRows")/e.val()));o();$("input",t).val(t.data("currentPage"));$("span.pagging_totalPages",t).text(t.data("totalPages"));$("span.pagging_totalRows",t).text(" Total de Registros: "+t.data("totalRows"));t.css("display",t.data("totalRows")>0?"block":"none")};$.fn.ordenator=function(n){var t=$(this),i=t.find("th");i.each(function(i,r){var u=$(r),f=u.data("sortField");f&&(u.css({cursor:"pointer",textDecoration:"underline"}),u.click(function(){n.sortByHidden.val().indexOf(f+" ")!=0?t.data("sortOrder","ASC"):t.data("sortOrder",t.data("sortOrder")=="ASC"?"DESC":"ASC");n.sortByHidden.val(f+" "+t.data("sortOrder"));n.updateCallback()}))})};$.fn.defaultButton=function(n){return $("input",this).keydown(function(t){t.keyCode===13&&(t.preventDefault(),n.click())})};$.fn.originalValid=$.fn.valid;$.fn.valid=function(n){var t=!0;return $(this).each(function(i,r){t=t&$(r).originalValid(n)}),t};$.fn.loadTabOnOpen=function(n,t){var i=$(this),r=$.Deferred();return i.click(function(){if(t||!i.data("loaded")){i.data("loaded",!0);var r=$(i.children("a:first").attr("href")).hide();n().done(function(n){r.html(n);setTimeout(function(){r.fadeIn(200)},100)})}}),r};$.message=function(n,t){var r=$("<div>").text(n).css({textAlign:"center",marginTop:"50px"}),i=$("<div>").css({textAlign:"center",position:"absolute",bottom:"10px",right:"10px"});return $.each(Object.keys(t),function(n,r){i.append($("<button>").css({minWidth:"100px"}).text(r).click(function(){t[r]&&t[r]();i.closeDialog()}))}),$.dialog({elements:[r,i],header:!1,closeButton:!1,width:"400px",height:"200px"})};window.views=function(n){return n.Job={Index:function(){var n=$.myContext("#JobIndex"),i=n("form"),t=function(){var t=$.Deferred();return n("input[name=SortBy]").val("Name ASC"),i.valid()&&actions.Job.SearchCount(i.toJSON()).done(function(i){n(".paginator").paginator({currentPage:1,totalRows:parseInt(i)});r().done(function(){t.resolve()})}),t},r=function(){return n("tbody:first").ajaxLoad(actions.Job.SearchResult(i.toJSON())).done(function(){n("i[name=delete]").click(function(){$.confirmarExclusao()&&actions.Job.Delete({id:$(this).parents("tr:first").data("id")}).done(t)});n("i[name=edit]").click(function(){var n=$(this).parents("tr:first"),i=n.data("jobType");dialogs[i].Register({id:n.data("id")}).done(t)})})};n(".paginator").paginator({startRowInput:n("[name=StartRow]"),maxRowsInput:n("[name=MaxRows]"),pageChanged:r});n("table:first").ordenator({sortByHidden:n("input[name=SortBy]"),updateCallback:r});n("#search").click(function(){t().done(function(){$.mensagemConsultaAtualizada()})});n("#addJob").click(function(){n("#jobsToAdd").slideToggle()});n("#addSqlCommandJob").click(function(){dialogs.SqlCommandJob.Register().done(t)});n("#addSqlMailReportJob").click(function(){dialogs.SqlMailReportJob.Register().done(t)});n("#addHttpJob").click(function(){dialogs.HttpJob.Register().done(t)});n("#toggleFilters").click(function(){n("#filters").slideToggle()});t()}},n}(window.views||{});window.views=function(n){return n.SqlCommandJob={Register:function(){var t=$.myContext("#SqlCommandJobRegister"),n=t("form");n.validate();t("#save").click(function(){n.valid()&&actions.SqlCommandJob.Save(n.toJSON()).done(function(t){t.Id&&($.mensagemSalvo(),n.closeDialog())})});t("#cancel").click(function(){n.closeDialog()})}},n}(window.views||{});